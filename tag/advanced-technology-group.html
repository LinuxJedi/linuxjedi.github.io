<!DOCTYPE html>
<html lang="en">
<head>
        <title>LinuxJedi's /dev/null - Advanced Technology Group</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://linuxjedi.co.uk/theme/css/main.css" type="text/css" />
        <link href='http://linuxjedi.co.uk/theme/images/favicon.ico' rel='icon' type='image/x-icon'/>
        <link href="http://linuxjedi.co.uk/" type="application/atom+xml" rel="alternate" title="LinuxJedi's /dev/null ATOM Feed" />


        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://linuxjedi.co.uk/css/ie.css"/>
                <script src="http://linuxjedi.co.uk/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://linuxjedi.co.uk/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
          <h1><a href="http://linuxjedi.co.uk/index.html"><img src="http://linuxjedi.co.uk/theme/images/LinuxJedi_head.png" alt="LinuxJedi's /dev/null" /><br /><strong>The /dev/null ramblings of a Linux Jedi</strong></a></h1>
                <nav><ul>
                    <li ><a href="http://linuxjedi.co.uk/about-linuxjedi.html">About LinuxJedi</a></li>
                <li><a href="http://linuxjedi.co.uk/">Archives</a></li>
                </ul></nav>
        </header><!-- /#banner -->

     <section id="content" class="body">
        <aside id="featured"><article>
                <h1 class="entry-title"><a href="http://linuxjedi.co.uk/posts/2014/Oct/31/why-json-is-bad-for-applications/">Why JSON is bad for applications</a></h1>
<footer class="post-info">
        <abbr class="published" title="2014-10-31T15:22:00">
                Fri 31 Oct 2014, 15:22
        </abbr>

<p>In <a href="http://linuxjedi.co.uk/category/general.html">General</a>. </p>
<p>tags: <a href="http://linuxjedi.co.uk/tag/hp.html">HP</a><a href="http://linuxjedi.co.uk/tag/advanced-technology-group.html">Advanced Technology Group</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>Today I read an article about how company X has improved things by amongst other things ditching JSON after 2 years of using it.  Before I start on this subject I should say that JSON does have its place.  If you have a web application where a browser is talking to a web server and in particular uses JavaScript then JSON is a good fit.</p>
<p>I've discussed this issue several times before with <a class="reference external" href="http://krow.net/">Brian Aker</a> who works with me at HP's Advanced Technology Group and in the past I have been hit with the issues I'm going to talk about here.</p>
<p>JSON is human readable and easy to parse, that cannot be denied and for prototyping is good in a pinch.  The first problem comes when you need to validate data.  I've been stung many times by one end trying to read/write the JSON in a slightly different format to the other end, the end result is always not pretty.  This is one advantage that XML and SOAP has going for it over JSON since validation is easier.  I'm personally not a fan of XML but there are many who are.</p>
<p>There are additional problems when you start using mobile platforms.  Mobile networks are unreliable, you may have a good 3G signal but it is possible to only get dial-up speed through it due to all the other users.  JSON is verbose, XML more so which requires more data transfer.  Whilst this can be resolved with protocol compression it will require additional decoding on the client side to do this.  In addition data conversion will be needed in many cases for numeric fields.</p>
<p>The biggest problem with JSON is versioning.  As you add more features to your application there will likely come a time where you need to change the data structure for your messages.  Often you can't guarantee that your client is using the same version of the software as your server so backwards and forwards compatibility problems can arise.  Resolving these often makes the JSON messages very complex to create and decode.  This is not as much of a problem for web applications because the browser usually grabs an update version of the JavaScript on execution.  So changing the data format at any time is easy as long as both ends agree on the format.</p>
<div class="section" id="the-solution">
<h2>The solution</h2>
<p>For many applications the data you are sending is directly from a database or at least data that has been modified since being read from a database.  So you will likely want the data model for your messages to match this as much as possible.  This is where <a class="reference external" href="https://developers.google.com/protocol-buffers/">Google's Protocol Buffers</a> fit nicely.</p>
<p>Protocol Buffers allow you to specify a schema for the data in a human readable format, it actually looks a little like a database schema.  They will automatically validate the data for you and have versioning built-in.  This means you can make your code easily backwards and forwards compatible.</p>
<p>There is a positive and negative side to the data transfer of Protocol Buffers.  It is a binary protocol.  This means it takes up minimal bandwidth on the wire but also means that it is very hard to interpret the data without the schema.  The same could be said if you were given InnoDB table data without the schemas.  It also means it may be possible to compress the data further with something like LZO or DEFLATE.</p>
<p>I recommend application developers consider Protocol Buffers instead of JSON when they are next developing a server/client application.</p>
</div>

        </article></aside><!-- /#featured -->
                <h1>Other articles</h1>
                <hr />
                    <ol id="posts-list" class="hfeed">
        <li><article class="hentry">
                <header>
                        <h1><a href="http://linuxjedi.co.uk/posts/2014/Oct/22/libattchsql-hits-first-ga/" rel="bookmark" title="Permalink to libAttchSQL Hits First GA!">libAttchSQL Hits First GA!</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-22T11:35:00">
                Wed 22 Oct 2014, 11:35
        </abbr>

<p>In <a href="http://linuxjedi.co.uk/category/mysql.html">MySQL</a>. </p>
<p>tags: <a href="http://linuxjedi.co.uk/tag/mysql.html">MySQL</a><a href="http://linuxjedi.co.uk/tag/libattachsql.html">libAttachSQL</a><a href="http://linuxjedi.co.uk/tag/hp.html">HP</a><a href="http://linuxjedi.co.uk/tag/advanced-technology-group.html">Advanced Technology Group</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>We have come a long way since the first code was put down for <a class="reference external" href="http://libattachsql.org">libAttachSQL</a> on the 4th July.  It has been a fantastic project to work on so I am very pleased to announce our first GA release.</p>
<p>For those who haven't seen it so far libAttachSQL is ...</p>
                <a class="readmore" href="http://linuxjedi.co.uk/posts/2014/Oct/22/libattchsql-hits-first-ga/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="http://linuxjedi.co.uk/posts/2014/Oct/15/libattachsql-single-thread-vs-libmysqlclient-multi-thread/" rel="bookmark" title="Permalink to libAttachSQL Single Thread vs. libmysqlclient Multi Thread">libAttachSQL Single Thread vs. libmysqlclient Multi Thread</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-15T20:01:00">
                Wed 15 Oct 2014, 20:01
        </abbr>

<p>In <a href="http://linuxjedi.co.uk/category/mysql.html">MySQL</a>. </p>
<p>tags: <a href="http://linuxjedi.co.uk/tag/mysql.html">MySQL</a><a href="http://linuxjedi.co.uk/tag/libattachsql.html">libAttachSQL</a><a href="http://linuxjedi.co.uk/tag/hp.html">HP</a><a href="http://linuxjedi.co.uk/tag/advanced-technology-group.html">Advanced Technology Group</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>I have recently <a class="reference external" href="http://linuxjedi.co.uk/posts/2014/Oct/03/libattachsql-benchmarks-with-sysbench/">posted up benchmarks</a> of <a class="reference external" href="http://libattachsql.org">libAttachSQL</a> vs. libmysqlclient using sysbench.  Whilst these are great and shows the results I hoped for, this isn't what we designed libAttachSQL for.  It was designed for non-blocking many connections per thread.</p>
<p>With this in mind I spent today knocking up a ...</p>
                <a class="readmore" href="http://linuxjedi.co.uk/posts/2014/Oct/15/libattachsql-single-thread-vs-libmysqlclient-multi-thread/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="http://linuxjedi.co.uk/posts/2014/Oct/14/libattachsql-090-rc-connection-groups/" rel="bookmark" title="Permalink to libAttachSQL 0.9.0 RC - Connection Groups">libAttachSQL 0.9.0 RC - Connection Groups</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-14T17:14:00">
                Tue 14 Oct 2014, 17:14
        </abbr>

<p>In <a href="http://linuxjedi.co.uk/category/mysql.html">MySQL</a>. </p>
<p>tags: <a href="http://linuxjedi.co.uk/tag/mysql.html">MySQL</a><a href="http://linuxjedi.co.uk/tag/libattachsql.html">libAttachSQL</a><a href="http://linuxjedi.co.uk/tag/hp.html">HP</a><a href="http://linuxjedi.co.uk/tag/advanced-technology-group.html">Advanced Technology Group</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>It has been just over 4 months since I started working on <a class="reference external" href="http://libattachsql.org">libAttachSQL</a> for HP's Advanced Technology Group.  Today marks the first (and hopefully only) RC release of the library.</p>
<div class="section" id="connection-groups">
<h2>Connection Groups</h2>
<p>The only real new feature that has been added to 0.9.0 is the concept of ...</p></div>
                <a class="readmore" href="http://linuxjedi.co.uk/posts/2014/Oct/14/libattachsql-090-rc-connection-groups/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="http://linuxjedi.co.uk/posts/2014/Oct/08/libattachsql-second-beta-after-the-sledgehammer/" rel="bookmark" title="Permalink to libAttachSQL Second Beta, After the Sledgehammer">libAttachSQL Second Beta, After the Sledgehammer</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-08T20:52:00">
                Wed 08 Oct 2014, 20:52
        </abbr>

<p>In <a href="http://linuxjedi.co.uk/category/mysql.html">MySQL</a>. </p>
<p>tags: <a href="http://linuxjedi.co.uk/tag/mysql.html">MySQL</a><a href="http://linuxjedi.co.uk/tag/libattachsql.html">libAttachSQL</a><a href="http://linuxjedi.co.uk/tag/hp.html">HP</a><a href="http://linuxjedi.co.uk/tag/advanced-technology-group.html">Advanced Technology Group</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>Last week I <a class="reference external" href="http://linuxjedi.co.uk/posts/2014/Oct/03/libattachsql-benchmarks-with-sysbench/">blogged about getting sysbench working with libAttachSQL</a>.  This was not only an exercise in performance but also the first real test for <a class="reference external" href="http://libattachsql.org/">libAttachSQL</a>.</p>
<p>Before I had done this testing the most the early Alpha and Beta releases of libAttachSQL had gone through is a few basic queries ...</p>
                <a class="readmore" href="http://linuxjedi.co.uk/posts/2014/Oct/08/libattachsql-second-beta-after-the-sledgehammer/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="http://linuxjedi.co.uk/posts/2014/Oct/03/libattachsql-benchmarks-with-sysbench/" rel="bookmark" title="Permalink to libAttachSQL Benchmarks With Sysbench">libAttachSQL Benchmarks With Sysbench</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-03T21:28:00">
                Fri 03 Oct 2014, 21:28
        </abbr>

<p>In <a href="http://linuxjedi.co.uk/category/mysql.html">MySQL</a>. </p>
<p>tags: <a href="http://linuxjedi.co.uk/tag/mysql.html">MySQL</a><a href="http://linuxjedi.co.uk/tag/libattachsql.html">libAttachSQL</a><a href="http://linuxjedi.co.uk/tag/hp.html">HP</a><a href="http://linuxjedi.co.uk/tag/advanced-technology-group.html">Advanced Technology Group</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>This week I have been spending a little bit of time creating a module for <a class="reference external" href="https://launchpad.net/sysbench">Sysbench</a> so that it can use <a class="reference external" href="http://libattachsql.org/">libAttachSQL</a> as a database driver.  The reason for doing this is twofold:</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://krow.net/">Brian</a> (my boss at HP's Advanced Technology Group) said now would be a good time to ...</li></ol>
                <a class="readmore" href="http://linuxjedi.co.uk/posts/2014/Oct/03/libattachsql-benchmarks-with-sysbench/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
        <li><article class="hentry">
                <header>
                        <h1><a href="http://linuxjedi.co.uk/posts/2014/Sep/23/libattachsql-query-example/" rel="bookmark" title="Permalink to libAttachSQL Query Example">libAttachSQL Query Example</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-09-23T23:02:00">
                Tue 23 Sep 2014, 23:02
        </abbr>

<p>In <a href="http://linuxjedi.co.uk/category/mysql.html">MySQL</a>. </p>
<p>tags: <a href="http://linuxjedi.co.uk/tag/mysql.html">MySQL</a><a href="http://linuxjedi.co.uk/tag/libattachsql.html">libAttachSQL</a><a href="http://linuxjedi.co.uk/tag/hp.html">HP</a><a href="http://linuxjedi.co.uk/tag/advanced-technology-group.html">Advanced Technology Group</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
                <p>I was asked some questions on IRC last night about how the query example in libAttachSQL's code base works.  For those who missed previous posts, <a class="reference external" href="http://libattachsql.org/">libAttachSQL</a> is a lightweight, non-blocking, Apache 2.0 licensed C connector for MySQL servers which I am developing for HP's Advanced Technology Group ...</p>
                <a class="readmore" href="http://linuxjedi.co.uk/posts/2014/Sep/23/libattachsql-query-example/">read more</a>
                </div><!-- /.entry-content -->
        </article></li>
</ol><!-- /#posts-list -->
</section><!-- /#content -->

        <aside id="sidebar">
<div class="widget" id="conference" role="conference">
<h2>Percona Live London</h2>
<a href="http://www.percona.com/live/london-2014/"><img width="123" height="123" title="Percona Live London, November 3-4, 2014" alt="Percona Live London, November 3-4, 2014" src="http://s0.percona.com/percona-live/pluk14/123x123_UKSpeaking_14.png" /></a>
</div><div class="widget" id="book" role="book">
<h2>MySQL 5.1 Plugins Development</h2>
<a href="https://www.packtpub.com/mysql-5-1-plugins-development/book"><img border="0" style="float:left" src="http://linuxjedi.co.uk/theme/images/0608OS_MockupCover_sm.png" />
MySQL 5.1 Plugins Development by Andrew Hutchings and Sergei Golubchik is now available from Packt Publishing.</a>
<br style="clear:left;" />
</div><div class='widget' id='twitter_feed'>
<h2>Twitter Feed</h2>
<a class="twitter-timeline" width="280" height="300" href="https://twitter.com/LinuxJedi" data-widget-id="269020197594210304">Tweets by @LinuxJedi</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>                <div class="widget">
                        <h2>Categories</h2>
                        <ul>
                           <li ><a href="http://linuxjedi.co.uk/category/general.html">General</a></li>
                           <li ><a href="http://linuxjedi.co.uk/category/mysql.html">MySQL</a></li>
                        </ul>
                </div>
        </aside><!-- /#sidebar -->

        <footer id="footer" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
                </address><!-- /#about -->
                <p>The LinuxJedi logo and the content of this blog is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_GB">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>
                <p>The theme is «notmyidea-lxj», a modified version of «notmyidea-cms», the default theme.</p>
        </footer><!-- /#footer -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-55086889-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>